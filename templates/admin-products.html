{% extends "base.html" %}

{% block title %}
    StoreAdmin - Товары
{% endblock %}

{% block content %}
    <br>
    <br>
    <div class="container-fluid" id="content">
        <div class="row">
            <div class="col-md-3">
                <div class="list-group">
                    <span class="list-group-item"><b>Админ панель</b></span>
                    <a href="{{ url_for('admin') }}" class="list-group-item list-group-item-action active">
                        Главная
                    </a>
                    <a href="{{ url_for('admin_products') }}" class="list-group-item list-group-item-action">Товары</a>
                    <a href="{{ url_for('admin_categories') }}" class="list-group-item list-group-item-action">Категории</a>
                    <a href="{{ url_for('admin_users') }}" class="list-group-item list-group-item-action">Пользователи</a>
                </div>
            </div>
            <div class="col-md-9">
                <h3>
                    Товары
                    <a href="{{ url_for('add_product') }}" data-toggle="tooltip" data-placement="top" title="Добавить товар">
                        <img src="{{ url_for('static', filename='img/plus.svg') }}" width="16" height="16" alt="">
                    </a>
                </h3>
                <table class="table">
                    <thead>
                    <tr>
                        <th scope="col">№ товара</th>
                        <th scope="col">Название</th>
                        <th scope="col">Цена</th>
                        <th scope="col">Количество на складе</th>
                        <th scope="col">Доставка</th>
                        <th scope="col">Категория</th>
                        <th scope="col">Действия</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for prod, real_price in products %}
                        <tr>
                            <th scope="row">{{ prod.id }}</th>
                            <td><a href="{{ url_for('product', id=prod.id) }}">{{ prod.name }}</a></td>
                            <td>
                                {% if prod.discount == 0 %}
                                    <p class="no-margin">{{ prod.price }} р.</p>
                                {% else %}
                                    <p class="no-margin">{{ real_price }} р.</p>
                                    <p class="no-margin"><s>{{ prod.price }} р.</s> <span class="badge badge-danger">-{{ prod.discount }}%</span></p>
                                {% endif %}
                            </td>
                            <td>{{ prod.count }}</td>
                            {% if prod.delivery == 0 %}
                                <td class="green">Бесплатно</td>
                            {% else %}
                                <td>{{ prod.delivery }} р.</td>
                            {% endif %}
                            <td><a href="{{ url_for('category', categ=prod.category.engname) }}">{{ prod.category.name }}</a></td>
                            <td>
                                <a href="{{ url_for('edit_product', id=prod.id) }}" data-toggle="tooltip" data-placement="top" title="Изменить товар">
                                    <img src="{{ url_for('static', filename='img/pencil.svg') }}" width="16" height="16" alt="">
                                </a>
                                <a href="{{ url_for('delete_product', id=prod.id) }}" data-toggle="tooltip" data-placement="top" title="Удалить товар">
                                    <img src="{{ url_for('static', filename='img/delete.svg') }}" width="16" height="16" alt="">
                                </a>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
{% endblock %}

{% block script %}
    $(function () {
        $('[data-toggle="tooltip"]').tooltip()
    })
{% endblock %}
